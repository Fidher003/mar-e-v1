<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>IWLS – Squat / Marée / Restrictions</title>

<style>
:root{
  --bg:#0b1020; --text:#e7ecff; --muted:#8ea0c6;
  --line:rgba(255,255,255,.12);
  --accent:#6aa9ff;
  --ok:#2dd4bf; --warn:#fbbf24; --bad:#fb7185;
  --radius:16px;
  --mono: ui-monospace, Menlo, Consolas, monospace;
  --sep: rgba(255,255,255,.10);
  --rowHL: rgba(255,255,255,.06);
}
*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:system-ui,Segoe UI,Arial;
  background:radial-gradient(900px 600px at 20% 0%,#1e3a8a,transparent),
             radial-gradient(900px 600px at 80% 100%,#134e4a,transparent),
             var(--bg);
  color:var(--text);
}

header{max-width:1200px;margin:auto;padding:24px}
h1{margin:0}

.wrap{
  max-width:1200px;margin:auto;padding:16px;
  display:grid;grid-template-columns:360px 1fr;gap:16px
}
@media(max-width:900px){.wrap{grid-template-columns:1fr}}

.card{
  background:rgba(255,255,255,.05);
  border:1px solid var(--line);
  border-radius:var(--radius);
  overflow:hidden;
}
.hd{
  padding:14px 16px;
  border-bottom:1px solid var(--line);
  display:flex;justify-content:space-between;align-items:center;
  font-weight:900;
}
.bd{padding:16px}

.field label{font-size:12px;color:var(--muted)}
.field input,.field select{
  width:100%;padding:10px;margin-top:4px;
  border-radius:12px;border:1px solid var(--line);
  background:rgba(0,0,0,.25);color:var(--text)
}

button{
  padding:10px 14px;border-radius:14px;
  background:var(--accent);border:0;font-weight:900;cursor:pointer;
  color:#081022;
}

.chartWrap{
  border:1px solid var(--line);
  border-radius:12px;
  background:rgba(0,0,0,.22);
  padding:10px;
  position: relative;
  padding-top:56px;
}
#tideChart{ height:285px !important; }

/* ================= MOBILE FIX BOUTON ================= */
@media(max-width:520px){
  .tideControls{ grid-template-columns:1fr; }

  .tideRight{
    width:100%;
    justify-content:center;
  }

  #plotTide{
    display:block;
    width:90vw;
    max-width:360px;
    margin:0 auto;
    padding:6px 12px;
    font-size:14px;
    border-radius:12px;
    white-space:normal;
  }
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
<header>
  <h1>IWLS – Squat / Marée / Restrictions</h1>
</header>

<main class="wrap">

<section class="card">
  <div class="hd">Entrées</div>
  <div class="bd">
    <div class="field">
      <label>Date</label>
      <input type="date" id="date">
    </div>
  </div>
</section>

<section class="card">
  <div class="hd">
    <span>Courbe de marée (24h)</span>
    <span id="tideStatus">—</span>
  </div>

  <div class="bd">
    <div class="tideControls">
      <div class="field">
        <label>Marégraphe</label>
        <select id="tideStation">
          <option>Pont de Québec</option>
          <option>Neuville</option>
        </select>
      </div>

      <div class="tideRight">
        <button id="plotTide">Générer courbe marée</button>
      </div>
    </div>

    <div class="chartWrap">
      <canvas id="tideChart"></canvas>
    </div>
  </div>
</section>

</main>

<script>
let tideChart=null;

document.getElementById("plotTide").addEventListener("click", async ()=>{
  const isPont = document.getElementById("tideStation").value==="Pont de Québec";

  const data = Array.from({length:24},(_,i)=>({
    x:Date.now()+i*3600000,
    y:isPont ? 53.1-(45+Math.random()*2) : Math.random()*5
  }));

  if(tideChart) tideChart.destroy();

  tideChart=new Chart(document.getElementById("tideChart"),{
    type:"line",
    data:{datasets:[{data,borderWidth:2,pointRadius:0}]},
    options:{
      responsive:true,
      maintainAspectRatio:false,
      scales:{
        y:{
          min:isPont?45:0,
          max:isPont?55:10,
          ticks:{stepSize:isPont?1:1}
        }
      }
    }
  });
});
</script>
</body>
</html>
